---
description: Helm chart version management rules
globs: ["cost-onprem/**/*.yaml", "cost-onprem/**/*.tpl", "cost-onprem/Chart.yaml"]
---

# Chart Version Management

## CRITICAL: Bump Version on Chart Changes

**When modifying ANY file in `cost-onprem/` directory, you MUST bump the chart version.**

### Files That Require Version Bump

- `cost-onprem/templates/**/*.yaml` - Template changes
- `cost-onprem/templates/**/*.tpl` - Helper changes
- `cost-onprem/values.yaml` - Default value changes
- `cost-onprem/Chart.yaml` - Chart metadata changes

### How to Bump Version

1. **Read current version** from `cost-onprem/Chart.yaml`
2. **Increment patch version** (e.g., `0.2.11` â†’ `0.2.12`)
3. **Update Chart.yaml** with new version

```bash
# Example: Current version is 0.2.11, bump to 0.2.12
```

### Version Format

Use semantic versioning: `MAJOR.MINOR.PATCH`

- **PATCH** (default): Bug fixes, template corrections, minor changes
- **MINOR**: New features, new templates, significant changes
- **MAJOR**: Breaking changes, major refactors

### Reminder Checklist

Before completing any task that modifies chart files:

- [ ] Did I modify any file in `cost-onprem/`?
- [ ] Did I bump the version in `cost-onprem/Chart.yaml`?
- [ ] Is the version increment appropriate (patch/minor/major)?

### Example

If you fix a bug in `cost-onprem/templates/ingress/deployment.yaml`:

1. Make the fix
2. Open `cost-onprem/Chart.yaml`
3. Change `version: 0.2.11` to `version: 0.2.12`
4. Mention the version bump in your response

## DO NOT

- Skip version bump for "small" changes - ALL changes need version bumps
- Bump version for non-chart files (scripts, docs, tests)
- Forget to mention the version bump to the user
